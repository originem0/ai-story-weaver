# 更新日志

所有重要的项目变更都会记录在这个文件中。

---

## [v2.1] - 2025-01-XX

### ✨ 新增
- 实时旋转加载指示器（故事生成和音频生成时）
- Image Prompt 可选输入功能
- 设置图标圆形按钮设计（更明显）

### 🎨 UI 优化
- 图片显示从 `object-cover` 改为 `object-contain`（完整显示）
- 配色从蓝紫色改为蓝绿色系（Teal/Cyan）
- 所有卡片增加毛玻璃效果（`backdrop-blur-sm`）
- 圆角从 `rounded-lg` 升级为 `rounded-xl`
- 标题字体从 `text-4xl` 增大到 `text-5xl`，增加 `tracking-tight`
- 按钮增大并增强阴影效果（`shadow-xl`, `hover:shadow-2xl`）
- 设置面板渐变背景（`from-white to-teal-50/30`）

### 🔧 功能改进
- 用户自定义提示优先于应用默认提示
- 可不输入 prompt 直接生成（使用默认规则）
- 支持自定义字数、语言、风格、语气等要求

### 🐛 修复
- 长图在图片框中显示不完整的问题
- 设置面板配色与主页面不协调的问题

---

## [v2.0] - 2025-01-XX

### 🎨 重大视觉重构
- 从暗黑风格全面改为清爽浅色风格
- 背景从深灰色改为浅色渐变（`from-slate-50 via-blue-50 to-purple-50`）
- 卡片从暗色半透明改为纯白背景
- 文字从浅色改为深色（`text-slate-800`）
- 文字对比度达到 WCAG AAA 级（16.5:1）

### 📐 布局优化
- 图片上传和输入框并排显示（等宽两列）
- 故事文本框独占一行（更大展示空间）
- 动态显示逻辑（无内容时隐藏组件，减少空白）
- 容器宽度从 `max-w-7xl` 调整为 `max-w-6xl`
- 组件间距从 `space-y-6` 改为 `space-y-4`

---

## [v1.3] - 2025-01-XX

### ✨ 新增
- 音频下载功能（Download 按钮）
- 自动命名下载文件（`story-narration-[时间戳].wav/mp3`）
- 根据 TTS 提供商自动选择文件格式

### 📐 UI 优化
- 容器宽度扩大至 `max-w-7xl` (+25%)
- 标题字体增大至 `text-5xl` (+33%)
- 输入框高度增加至 `h-48` (+33%)
- 故事文本框独占一整行，最小高度 400px
- 所有组件 Padding 统一为 `p-5`
- 添加 Emoji 图标贯穿全局

---

## [v1.2] - 2025-01-XX

### 🐛 修复
- 设置面板内容无法滚动问题
- 点击弹窗内部误关闭问题
- API Key 优先级逻辑（Settings > 环境变量）

### 🎨 UI 改进
- 三段式布局（固定标题 + 可滚动内容 + 固定按钮）
- 弹窗最大高度限制为 `max-h-[90vh]`
- 内容区域可平滑滚动（`overflow-y-auto flex-1`）
- 标题和按钮栏添加分隔线

---

## [v1.1] - 2025-01-XX

### ✨ 新增功能
- 连接验证增强（5 种错误分类：网络、认证、模型、配置、未知）
- 扩展模型选项至 11+ 个（Gemini 2.5/2.0/1.5 全系列）
- 自定义模型输入功能
- TTS 模型选择器（之前硬编码）
- 自动重试机制（503/429/网络错误）
- 指数退避策略（2s → 4s → 8s）

### 🎨 UI 改进
- 彩色错误提示（不同错误类型用不同颜色）
- 图标说明栏（底部显示各图标含义）
- 部分界面中文化（标签、提示文本）

### 🔧 代码改进
- 新增 `ValidationResult` 接口
- 新增 `parseGeminiError()` 函数
- 新增 `retryWithBackoff()` 辅助函数
- 更完善的边界检查与错误处理

---

## [v1.0] - 2025-01-XX

### 🎉 初始版本

**核心功能:**
- 图片上传与预览
- 基于 Gemini 的故事生成
- Google Search Grounding 支持
- 双 TTS 引擎（Gemini / ElevenLabs）
- 音频播放器
- 设置面板（模型配置、API Key 管理）
- localStorage 持久化设置

**技术栈:**
- React 19 + TypeScript
- Vite 6
- Tailwind CSS
- @google/genai
- ElevenLabs REST API

---

## 图例

- ✨ 新增功能
- 🎨 UI/视觉改进
- 🐛 Bug 修复
- 🔧 功能改进/优化
- 📐 布局调整
- 🔒 安全更新
- 📝 文档更新
- ⚡ 性能优化
